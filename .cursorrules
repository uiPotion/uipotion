# UI Potion + Harold - AI Assistant Rules

You are working on **UI Potion**, a service that provides AI-agent-optimized UI component guides, built with **Harold** static site generator.

**IMPORTANT**: Always use "UI Potion" (with space) in all human-readable text, documentation, and website content. Use "UIPotion" or "uipotion" only for technical identifiers like file names, URLs, JSON keys, or code references.

---

## ğŸ¯ UI Potion Project Philosophy

UI Potion is NOT a component library with code to copy-paste. Instead:
- We provide **detailed specifications** for UI components ("potions")
- Specifications are **framework-agnostic** (work with React, Vue, Angular, Svelte, etc.)
- Specifications are **styling-agnostic** (work with Tailwind, CSS Modules, Chakra, etc.)
- AI agents read these specs and **generate code** adapted to user's stack
- **Zero maintenance burden** - specs don't break when frameworks update

---

## ğŸ—ï¸ Technology Stack

- **Static Site Generator**: Harold (Markdown + Handlebars + SCSS)
- **Content**: Potions stored as Markdown files in `src/potions/`
- **AI Discovery**: JSON manifests for programmatic access
- **Styling**: SCSS with modular approach

---

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ potions/              # Markdown files for potions
â”‚   â”œâ”€â”€ layouts/          # Layout patterns (dashboards, landing pages, etc.)
â”‚   â”œâ”€â”€ components/       # Reusable components (buttons, dialogs, cards)
â”‚   â”œâ”€â”€ features/         # Create when needed
â”‚   â”œâ”€â”€ patterns/         # Create when needed
â”‚   â””â”€â”€ tooling/          # Create when needed
â”œâ”€â”€ statics/               # Static files (copied to root by Harold)
â”‚   â”œâ”€â”€ uipotion-manifest.json       # Main discovery manifest
â”‚   â”œâ”€â”€ potions-index.json           # Index of all potions
â”‚   â”œâ”€â”€ potions/                     # Individual potion guides (JSON)
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ patterns/
â”‚   â”‚   â””â”€â”€ tooling/
â”‚   â”œâ”€â”€ schemas/                     # JSON schemas and contracts
â”‚   â””â”€â”€ skills/                      # Agent Skills packages (SKILL.md)
â”œâ”€â”€ potion-layouts/       # Handlebars layouts for potions
â”‚   â””â”€â”€ potion.hbs        # Layout for potion pages
â”œâ”€â”€ pages/                # Site pages (Handlebars)
â”‚   â”œâ”€â”€ index.hbs         # Homepage
â”‚   â””â”€â”€ about.hbs         # About page
â”œâ”€â”€ partials/             # Reusable Handlebars components
â”‚   â”œâ”€â”€ head.hbs
â”‚   â””â”€â”€ footer.hbs
â”œâ”€â”€ styles/               # SCSS files
â”‚   â”œâ”€â”€ main.scss         # Main (compiled)
â”‚   â”œâ”€â”€ _basic.scss       # Basic styles
â”‚   â”œâ”€â”€ _page.scss        # Page-level styles
â”‚   â””â”€â”€ _uipotion.scss    # UI Potion-specific styles
â”œâ”€â”€ assets/               # Images, fonts, JS
â”‚   â””â”€â”€ images/
â””â”€â”€ build/                # Output (auto-generated, don't edit!)
```

---

## ğŸ¨ UI Potion Key Concepts

### 1. Potions (UI Component Guides)

**Location**: `src/potions/` (organized by category)

**Format**: Markdown files with YAML front matter

**Required Front Matter Fields**:
```yaml
---
layout: 'potion'                                      # REQUIRED: Layout template
title: 'Component Name'                               # REQUIRED: Descriptive name (keep concise)
publicationDate: '2026-01-10'                         # REQUIRED: YYYY-MM-DD format
excerpt: 'Brief description'                          # REQUIRED: 1-2 sentences
category: 'Layouts'                                   # REQUIRED: Layouts|Components|Features|Patterns|Tooling
tags: [tag1, tag2]                                    # REQUIRED: Array of tags. First tag MUST be the category (layouts|components|features|patterns|tooling). Do NOT add any other category name as a tag (e.g. a Layouts potion must not have "features" in tags), or the potion will appear in multiple catalog sections.
agentManifest: 'potions/[category]/component-id.json' # REQUIRED: Path to JSON guide (in statics/)
---
```

**Potion Title Rule (CRITICAL)**:
- Keep potion titles concise and scannable.
- Prefer `2-6 words` and target `<= 60 characters`.
- Avoid long qualifier chains in titles (for example "with X, Y, and Z").
- Put detailed capability descriptions in `excerpt`, sections, and JSON fields instead of the title.
- Apply this consistently in:
  - Markdown front matter `title`
  - JSON guide `name`
  - Potions index entry `name`

**Content Structure**:
- Overview describing the component's purpose and key features
- Component structure and hierarchy
- Detailed specifications (dimensions, states, behavior)
- Responsive behavior at each breakpoint
- Accessibility requirements
- Animation specifications
- Framework patterns (remain agnostic)
- Testing checklist

**IMPORTANT - Visual Representations & Content Formatting**:
- âŒ **NEVER** use ASCII art or text-based diagrams in potion markdown files for the website
- âŒ **NEVER** use emojis (âœ… âŒ âœ“ âœ— etc.) in potion markdown files for the website
- âŒ ASCII boxes, borders, or visual layouts look unprofessional on the rendered website
- âœ… Use clear prose descriptions instead (e.g., "A 3-column grid layout with...")
- âœ… Save visual diagrams for future when we add screenshot/image support
- âœ… In JSON files for AI agents, you can include text structure if needed, but keep it minimal
- âœ… Use plain text for lists and examples (e.g., "Good:", "Bad:" instead of emojis)

### 2. AI Agent JSON Guides

**Location**: `src/statics/potions/[category]/`

**Format**: Comprehensive JSON files with complete specifications

**Required Structure** (see `src/statics/potions/layouts/dashboard.json` or a same-category guide as template):
```json
{
  "id": "component-id",
  "name": "Component Name",
  "version": "1.0.0",
  "aiAgentInstructions": {
    "summary": "...",
    "keyFeatures": [...],
    "implementationSteps": [...]
  },
  "structure": {...},
  "components": {...},
  "responsiveBreakpoints": {...},
  "stateManagement": {...},
  "frameworkPatterns": {
    "react": {...},
    "vue": {...},
    "angular": {...},
    "svelte": {...}
  },
  "stylingApproaches": {
    "tailwindCSS": {...},
    "cssModules": {...},
    "styledComponents": {...},
    "chakraUI": {...}
  },
  "accessibility": {...},
  "animations": {...},
  "testingChecklist": [...]
}
```

### 3. Discovery System

- **Main Manifest**: `src/statics/uipotion-manifest.json` - Entry point for AI agents
- **Potions Index**: `src/statics/potions-index.json` - Searchable catalog of all potions
- **Individual Guides**: `src/statics/potions/[category]/[id].json` - Detailed implementation guide
- **Agent Skills**: `src/statics/skills/[skill-name]/SKILL.md` - Optional skills for compatible agents

### 4. Potion Usage (Best Approach)

**For AI agents implementing from a potion:**
1. Start from manifest â†’ index â†’ guide (JSON is the source of truth).
2. Read `aiAgentInstructions` and, if present, `tokens`, `designSystem`, and `outputConstraints`.
3. Detect framework + styling from the repo, then map specs to existing tokens/conventions.
4. Implement using only the detected framework and styling system; document assumptions.
5. Use the Markdown potion page for human context, not implementation details.

**For humans requesting a potion:**
- Share the JSON guide URL and your stack details (framework + styling).
- Use the Markdown page to review behavior, accessibility, and edge cases.

---

## ğŸ§ª Harold Static Site Generator

### What Harold Does

Harold transforms:
- **Markdown files** (with YAML front matter) â†’ HTML pages
- **Handlebars templates** (.hbs) â†’ HTML pages  
- **SCSS files** â†’ Minified CSS
- **Images** â†’ Auto-enhanced with lazy loading, dimensions
- **JSON data** â†’ Copied to build directory

### Build Process

1. Prepare directories (`build/`, `build/potions/`)
2. Copy assets (`src/assets/` â†’ `build/assets/`)
3. Register Handlebars helpers (formatDate, postsList, relativePath, etc.)
4. Generate partials (register `src/partials/*.hbs`)
5. Generate posts/potions (Markdown â†’ HTML via layouts)
6. Generate styles (SCSS â†’ CSS)
7. Generate pages (`.hbs` â†’ HTML)
8. Copy JSON data to build directory
9. Copy statics (`src/statics/**/*` â†’ `build/` root)

### Commands

```bash
npm run build           # Full build (preferred)
npm run start           # Build + dev server (localhost:3000) + watch
npm test               # Run test suite (if applicable)
```

**Build command rule (CRITICAL)**:
- Always use `npm run build` for full builds in this project.
- Do not run `harold-scripts build` directly unless explicitly debugging Harold internals.

### Front Matter Rules (CRITICAL!)

**For Potions**:
```yaml
---
layout: 'potion'           # REQUIRED: Use 'potion' layout
title: 'Post Title'        # REQUIRED: string
publicationDate: '2024-01-15' # REQUIRED: YYYY-MM-DD format (string)
excerpt: 'Brief summary'   # REQUIRED: string (for SEO)
category: 'Layouts'             # REQUIRED: Category name (Layouts|Components|Features|Patterns|Tooling)
tags: [javascript, ui]          # REQUIRED: array
agentManifest: 'potions/[category]/id.json' # REQUIRED: Path to JSON (in statics/)
---
```

**Line Endings**:
- Harold auto-normalizes CRLF â†’ LF
- Use LF in editor for consistency
- Front matter parsing fails with CRLF

### Creating Pages (.hbs)

**Typical Structure**:
```handlebars
{{> head 
  title="Homepage"
  description="Site description"
}}

<div class="container">
  <h1>Welcome</h1>
  <a href="/about">About</a>
</div>

{{> footer}}
```

**Key Points**:
- NO DOCTYPE/HTML tags in pages (added by layout)
- ALWAYS use `{{> partialName}}` for header/footer
- Use **absolute paths** for links (e.g. `/`, `/about`, `/potions`, `/potion-kit`, `/contribute`, `/legal`). Do NOT use the `relativePath` helper in this project.
- Pages are compiled with Handlebars + minified

### Potion Layouts

**Layout wraps potion content** (`src/potion-layouts/potion.hbs`):

Available variables in layouts:
- `{{title}}` - Potion title
- `{{excerpt}}` - Potion excerpt
- `{{publicationDate}}` - Publication date
- `{{category}}` - Category name
- `{{tags}}` - Array of tags
- `{{agentManifest}}` - Path to JSON guide
- `{{{content}}}` - Compiled markdown HTML (triple braces!)
- All custom front matter fields

### Handlebars Helpers

#### 1. Links and paths (this project)

**Do NOT use the `relativePath` helper in this project.** Use absolute paths for all internal links and assets, e.g.:

- `/` or `/index.html` â€” Home
- `/about` â€” About
- `/potions` â€” Potions catalog
- `/potion-kit` â€” Potion Kit
- `/contribute` â€” Contribute
- `/legal` â€” Legal
- `/assets/images/...`, `/styles/main.css` â€” Assets and styles

Example: `<a href="/about">About</a>`, `<a href="/potion-kit">Potion Kit</a>`, `<img src="/assets/images/logo.png" alt="...">`.

#### 2. `hostDirName` - Subdirectory Deployment

```handlebars
<html lang="en" data-hrld-root="{{hostDirName}}">
```

#### 3. `formatDate` - Format Dates

```handlebars
{{formatDate date=publicationDate format='dd mmmm yyyy'}}
{{formatDate date=publicationDate format='yyyy-mm-dd'}}
```

Format options: `dd`, `d`, `mmmm`, `mmm`, `mm`, `yyyy`

#### 4. `responsiveImg` - Responsive Images

```handlebars
{{responsiveImg
  src="assets/images/photo.jpg"
  alt="Photo description"
  width="800"
  height="600"
  loading="lazy"
}}
```

#### 5. `postsList` - Render Lists (for potions)

```handlebars
{{postsList
  perPageLimit=6
  currentPage=1
  byTagName="dashboard"
  className="potions-list"
  dateFormat="dd mmmm yyyy"
}}
```

### SCSS Rules

- **Partials**: Start with `_` (e.g., `_uipotion.scss`) - NOT compiled directly
- **Main files**: No `_` prefix (e.g., `main.scss`) - Compiled to CSS
- **Import order**: variables â†’ mixins â†’ base â†’ components
- **Use**: `@use` (modern) or `@import` (legacy)
- **UI Potion styles**: Keep in `_uipotion.scss`

---

## âœï¸ Creating a New Potion

### Step 1: Create Markdown File

**File**: `src/potions/[category]/your-component.md`

```yaml
---
layout: 'potion'
title: 'Your Component Name'
publicationDate: '2026-01-10'
excerpt: 'Brief description of the component (1-2 sentences)'
category: 'Components'  # Layouts, Components, Features, Patterns, or Tooling
tags:
  - relevant
  - tags
  - here
agentManifest: 'potions/[category]/your-component.json'
---

# Your Component Name

## Overview

Brief overview with clear prose descriptions.

## Structure

Component hierarchy and organization.

## Components

### Main Component
- Dimensions
- Behavior
- States

## Responsive Design

- Mobile (< 768px)
- Tablet (768px - 1024px)
- Desktop (> 1024px)

## Accessibility

- Keyboard navigation
- ARIA attributes
- Screen reader support

## Framework Patterns

Examples for different frameworks (stay agnostic).

## Testing Checklist

- [ ] Item 1
- [ ] Item 2
```

### Step 2: Create AI Agent JSON Guide

**File**: `src/statics/potions/[category]/your-component.json`

Use `src/statics/potions/layouts/dashboard.json` (or a same-category guide) as template. Must include:
- `aiAgentInstructions` - Summary, features, steps
- `structure` - Component hierarchy
- `components` - Detailed specs (dimensions, behavior, states)
- `responsiveBreakpoints` - Mobile, tablet, desktop
- `stateManagement` - State variables needed
- `frameworkPatterns` - React, Vue, Angular, Svelte patterns
- `stylingApproaches` - Tailwind, CSS Modules, styled-components, etc.
- `accessibility` - Complete accessibility specs
- `animations` - Timing, easing, properties
- `testingChecklist` - Verification steps

### Step 3: Update Potions Index

**File**: `src/statics/potions-index.json`

Add new entry to `potions` array:
```json
{
  "id": "your-component",
  "name": "Your Component Name",
  "category": "components",
  "tags": ["tag1", "tag2"],
  "excerpt": "Brief description",
  "webUrl": "https://uipotion.com/potions/components/your-component.html",
  "agentGuideUrl": "https://uipotion.com/potions/components/your-component.json",
  "markdownUrl": "https://uipotion.com/potions/components/your-component.md",
  "created": "2026-01-10",
  "updated": "2026-01-10"
}
```

Update `totalCount` and `lastUpdated` fields.

### Places to Update When Adding a Potion
- `src/potions/[category]/[slug].md` (front matter `agentManifest` matches JSON path)
- `src/statics/potions/[category]/[slug].json`
- `src/statics/potions-index.json` (add entry, update `totalCount` and `lastUpdated`)
- `src/statics/uipotion-manifest.json` (update `meta.updated`; update categories only if introducing a new one)
- No manual homepage listing needed (potions are rendered from Markdown)

### Places to Update When Editing an Existing Potion
After changing a potion's content (JSON, Markdown, relatedPotions, See Also, etc.), update dates so index and manifest stay in sync:
- **Potion JSON**: `src/statics/potions/[category]/[slug].json` â†’ set `meta.updated` to today (YYYY-MM-DD).
- **Potions index**: `src/statics/potions-index.json` â†’ set that potion's `updated` to the same date; set top-level `lastUpdated` to the same date.
- **Manifest**: `src/statics/uipotion-manifest.json` â†’ set `meta.updated` to the same date.

### Step 4: Build and Test

```bash
npm run build           # Build the site
npm run start           # Start dev server on http://localhost:3000
```

### Step 5: Cross-Reference Related Potions (CRITICAL!)

**IMPORTANT**: After creating a new potion, add helpful cross-references to related potions. These are **optional hints and tips**, not strict dependencies. Each potion must work independently.

**Philosophy**:
- âœ… Each potion is **self-contained** and fully functional on its own
- âœ… Cross-references are **suggestions** for complementary potions
- âœ… AI agents can implement a potion **without** needing other potions
- âœ… References help humans **discover** related content
- âŒ Don't make one potion **depend** on another potion
- âŒ Don't require AI agents to implement multiple potions

**Why This Matters**:
- Creates a discoverable network of related components
- Helps users find complementary potions
- Improves AI agent context (optional, not required)
- Maintains independence of each potion

**When to Add Cross-References** (as hints):

1. **New Component â†’ Mention in Feature/Layout that could use it**
   - Example: Text Input component? Add tip in Forms feature: "Consider using Text Input component pattern"
   - Example: Sidebar component? Add tip in Dashboard layout: "Works well with Sidebar component"

2. **New Feature â†’ Mention Components/Patterns that complement it**
   - Example: Forms feature? Add tip: "See Text Input component and Form Validation pattern"

3. **New Pattern â†’ Mention Components/Features it applies to**
   - Example: Form Validation pattern? Add tip: "Works with Text Input component"

4. **New Layout â†’ Mention Components that fit well**
   - Example: Dashboard layout? Add tip: "Commonly uses Navbar, Data Table, Sidebar components"

**Where to Add Cross-References**:

In the **Markdown file** (for humans):
- Add a "Related Potions" or "See Also" section at the end (optional)
- Use phrases like "Works well with", "Consider using", "See also", "Complements"
- Make it clear these are suggestions, not requirements

Example:
```markdown
## See Also

The Text Input component works well with these potions:
- **[Form Validation Pattern](/potions/patterns/form-validation.html)** - Apply validation UX best practices
- **[Forms Feature](/potions/features/form.html)** - Complete form implementation using this input

These are suggestions - Text Input works independently and can be used in any context.
```

In the **JSON file** (for AI agents) - OPTIONAL:
- Add a `relatedPotions` array in `meta` section (optional, informational only):
  ```json
  "meta": {
    "relatedPotions": [
      {
        "id": "form-validation",
        "category": "patterns",
        "relationship": "complements",
        "description": "Optional: Apply Form Validation pattern for better UX",
        "required": false
      }
    ]
  }
  ```
- Or add a note in `aiAgentInstructions.keyFeatures`: "TIP: Works well with Form Validation pattern (optional)"
- Always make it clear the reference is optional

**Tone for Cross-References**:
- âœ… "Works well with..."
- âœ… "Consider using..."
- âœ… "See also..."
- âœ… "Complements..."
- âœ… "Commonly paired with..."
- âŒ "Requires..."
- âŒ "Must use..."
- âŒ "Depends on..."
- âŒ "You need..."

**Checklist for Cross-Referencing**:
- [ ] Identified 2-3 related potions that complement this one
- [ ] Added lightweight "See Also" section to Markdown (optional)
- [ ] References use suggestive language ("works well with", "consider")
- [ ] Made it clear these are hints, not requirements
- [ ] Verified each potion still works independently
- [ ] (Optional) Added relatedPotions array to JSON meta with `required: false`

**Note**: Focus on the 2-3 most helpful suggestions. Keep it light and informational.

---

## âœ… Best Practices

### For Potions (Markdown)
- âœ… Use clear prose descriptions (no ASCII art, no emojis)
- âœ… Specify exact dimensions and breakpoints
- âœ… Include accessibility requirements from the start
- âœ… Provide testing checklist
- âœ… Show framework patterns, but remain agnostic
- âœ… Include common variations
- âŒ Don't provide framework-specific code
- âŒ Don't be vague about specifications

### For AI Guides (JSON)
- âœ… Use consistent JSON structure across all potions
- âœ… Provide code examples in `frameworkPatterns` section
- âœ… Include multiple styling approaches in `stylingApproaches`
- âœ… Be explicit about state management needs
- âœ… Include complete accessibility specs
- âŒ Don't leave ambiguous specifications
- âŒ Don't skip responsive breakpoints
- âŒ Don't forget animation specifications

### For Styling (SCSS)
- âœ… Keep UI Potion-specific styles in `_uipotion.scss`
- âœ… Use semantic class names
- âœ… Ensure responsive design
- âœ… Maintain consistent visual language
- âœ… Hero sections should be eye-catching
- âœ… Import order: variables â†’ mixins â†’ base â†’ components
- âœ… Partials start with `_`, main files don't
- âŒ Don't compile SCSS partials directly

### For Handlebars
- âœ… Use **absolute paths** for links and assets (e.g. `/about`, `/potions`, `/assets/...`). Do NOT use `relativePath` in this project.
- âœ… Use `{{> partialName}}` to include partials
- âœ… Use semantic HTML5 elements
- âœ… Include `{{> head}}` at top and `{{> footer}}` at bottom
- âŒ NEVER hardcode: `/styles/main.css`
- âŒ NEVER use absolute: `http://example.com/...`

### For Images
- âœ… Include `width` and `height`
- âœ… Use descriptive `alt` text
- âœ… Optimize before adding (tinypng.com)
- âœ… Use `loading="lazy"` (automatic)

### For SEO
- âœ… Include `excerpt` in front matter
- âœ… Use descriptive `title` and `tags`
- âœ… Add meta tags via head partial
- âœ… Use semantic HTML5 elements

---

## ğŸ“ Content Guidelines

### Writing Potions (Markdown)
- **Audience**: Human developers browsing the site
- **Style**: Clear, professional, comprehensive
- **Include**: Prose descriptions, detailed specifications, examples (NO ASCII art, NO emojis)
- **Structure**: Overview â†’ Structure â†’ Components â†’ Responsive â†’ Accessibility â†’ Examples

### Writing AI Agent Guides (JSON)
- **Audience**: AI coding assistants
- **Style**: Structured, comprehensive, unambiguous
- **Include**: Everything AI needs to implement without guessing
- **Be Specific**: Exact dimensions, colors, timings, behaviors
- **Framework Agnostic**: Provide patterns for multiple frameworks
- **Styling Agnostic**: Examples for multiple CSS approaches
- **Complete**: Accessibility, responsive, animations, state management

---

## ğŸ¯ Categories

1. **Layouts**: Full-page layouts and structural patterns (dashboards, landing pages, documentation layouts, app shells)
2. **Components**: Reusable UI building blocks (buttons, dialogs, cards, forms, navigation, data tables, feedback, media players, animations, badges, inputs)
3. **Features**: Complete user-facing features and flows (pricing tables, authentication flows, e-commerce, onboarding, search, user profiles)
4. **Patterns**: Design and interaction patterns (drag-and-drop, infinite scroll, progressive disclosure, accessibility patterns, keyboard navigation, focus management, responsive patterns)
5. **Tooling**: Developer tools and infrastructure (build tools, CLI utilities, third-party integrations, API patterns, performance optimization, testing strategies, deployment configs)

---

## ğŸ§ª Testing Checklist

Before considering a potion complete:
- [ ] Markdown file has correct front matter
- [ ] Markdown file includes category tag (e.g., `components`, `layouts`, `patterns`) as first tag for postsList helper; tags do not include any other category name (layouts, components, features, patterns, tooling) so the potion appears in only one catalog section
- [ ] JSON guide is comprehensive and follows template
- [ ] Added to potions-index.json
- [ ] Updated totalCount and lastUpdated in potions-index.json
- [ ] Built successfully with `npm run build`
- [ ] Tested in dev server with `npm run start`
- [ ] Links work correctly (absolute paths)
- [ ] JSON validates (proper structure)
- [ ] Responsive on mobile/tablet/desktop
- [ ] Content is clear and comprehensive
- [ ] Accessibility specs included
- [ ] Animation specs included
- [ ] Framework patterns provided for React, Vue, Angular, Svelte
- [ ] Styling approaches provided for Tailwind, CSS Modules, etc.
- [ ] **(Optional) Cross-referenced 2-3 related potions** as helpful suggestions (not requirements)
- [ ] **(Optional) "See Also" section added to Markdown** with suggestive language
- [ ] **(Optional) RelatedPotions array in JSON meta** with `required: false` flag

---

## âš ï¸ Common Pitfalls

### UI Potion-Specific
- âŒ Don't use ASCII art or emojis in potion markdown files
- âŒ Don't provide framework-specific code in potions (keep it generic)
- âŒ Don't add a category name (layouts, components, features, patterns, tooling) as a tag unless it is the potion's categoryâ€”otherwise the potion appears in multiple catalog sections
- âŒ Don't forget to update potions-index.json when adding a potion
- âŒ Don't forget to update dates when editing a potion: the potion JSON `meta.updated`, that potion's `updated` in potions-index.json, index `lastUpdated`, and uipotion-manifest.json `meta.updated`
- âŒ Don't skip accessibility specifications
- âŒ Don't be vague in JSON guides (AI needs specifics)
- âŒ Don't forget responsive breakpoints
- âŒ Don't skip animation specifications

### Harold-Specific
- âŒ DON'T edit files in `build/` (auto-generated!)
- âŒ DON'T skip required front matter fields
- âŒ DON'T use the `relativePath` helper (this project uses absolute paths)
- âŒ DON'T prefix partials with `_` (only SCSS!)
- âŒ DON'T compile SCSS partials directly
- âŒ DON'T forget to rebuild after changes
- âŒ DON'T use wrong date format (must be YYYY-MM-DD string)
- âŒ DON'T forget alt text on images

---

## ğŸ”— URL Structure

- Homepage: `/index.html`
- About: `/about.html`
- Potion: `/potions/[category]/[name].html`
- AI Manifest: `/uipotion-manifest.json`
- Potions Index: `/potions-index.json`
- Potion Guide: `/potions/[category]/[id].json`
- Skills: `/skills/[skill-name]/SKILL.md`

---

## ğŸ’¡ Quick Reference

| Task | Code |
|------|------|
| Build site | `npm run build` |
| Dev server | `npm run start` |
| Link to page | `/about`, `/potions`, `/potion-kit`, etc. |
| Link to asset | `/assets/images/logo.png`, `/styles/main.css` |
| Format date | `{{formatDate date=publicationDate format='dd mmmm yyyy'}}` |
| Use partial | `{{> head}}` / `{{> footer}}` |
| Pass data | `{{> head title="Page"}}` |
| Post variable | `{{title}}`, `{{excerpt}}`, `{{tags}}` |
| Loop tags | `{{#each tags}}{{this}}{{/each}}` |

---

## ğŸ§  Key Concepts

1. **Potions** = Markdown + Front Matter â†’ processed by layout â†’ HTML
2. **Pages** = Handlebars â†’ compiled â†’ HTML
3. **Layouts** = Handlebars templates that wrap potion content
4. **Partials** = Reusable Handlebars components (auto-registered)
5. **Helpers** = Functions available in templates (registered at build)
6. **Assets** = Copied as-is to `build/assets/`
7. **Statics** = Copied from `src/statics/` to `build/` root (manifests, schemas, skills)

---

## ğŸ“ How Harold Build Works

```
1. npm run build
   â†“
2. prepareDirectories() - Create build/potions/, etc.
   â†“
3. copyAssets() - Copy src/assets/ â†’ build/assets/
   â†“
4. registerHelpers() - Register formatDate, relativePath, etc.
   â†“
5. generatePartials() - Register src/partials/*.hbs
   â†“
6. generatePosts() - For each .md in src/potions/**:
   - Normalize line endings (CRLF â†’ LF)
   - Parse front matter
   - Validate required fields
   - Convert markdown â†’ HTML
   - Enhance images
   - Apply layout template
   - Minify HTML
  - Write to build/potions/[category]/[name].html
   â†“
7. generateStyles() - Compile SCSS â†’ CSS â†’ minify â†’ build/styles/
   â†“
8. generatePages() - For each .hbs in src/pages/:
   - Compile with Handlebars
   - Minify HTML
   - Write to build/[name].html
   â†“
9. copyStatics() - Copy src/statics/**/* â†’ build/ (root)
```

---

## ğŸ‰ Philosophy

### UI Potion Philosophy
- **Framework Agnostic**: Specifications work for any framework
- **Styling Agnostic**: Specifications work for any CSS approach
- **AI-First**: JSON guides are primary interface
- **Zero Maintenance**: Specs don't break when frameworks update
- **Always Current**: AI generates code using latest patterns

### Harold Philosophy
- **Simple by Design**: No complex bundlers
- **No Framework Lock-in**: Just Markdown â†’ HTML + CSS
- **Fast Builds**: Optimized for speed
- **Fast Sites**: Static output is blazing fast

---

## ğŸ”„ Dev Server (npm run start)

1. Run initial build
2. Start HTTP server on port 3000
3. Serve files from `build/` directory
4. Watch `src/` for changes (chokidar)
5. On change: Rebuild affected files
6. Browser auto-refreshes (via no-cache headers)

**Watched**:
- `src/potions/**/*.md` â†’ Rebuild potions
- `src/pages/*.hbs` â†’ Rebuild pages
- `src/styles/*.scss` â†’ Rebuild styles
- `src/partials/*.hbs` â†’ Rebuild all (partials affect everything)
- `src/potion-layouts/*.hbs` â†’ Rebuild potions
- `src/assets/**/*` â†’ Copy assets
- `src/statics/**/*` â†’ Copy statics to root

---

## ğŸš€ When in Doubt

1. Look at `src/potions/layouts/dashboard.md` and `src/statics/potions/layouts/dashboard.json` as reference
2. Ensure framework and styling agnosticism
3. Provide comprehensive specifications, not just code
4. Use absolute paths for links and assets (do not use `relativePath`)
5. Test with `npm run build` frequently
6. Remember: AI agents are the primary consumers of JSON guides
7. Follow established Harold patterns
8. Keep it simple

---

**You're ready to build UI Potion with Harold!** ğŸš€

**Remember**: UI Potion provides specifications, not code. AI agents transform these specs into production-ready implementations adapted to each developer's stack.
