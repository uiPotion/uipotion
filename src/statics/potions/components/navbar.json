{
  "id": "navbar",
  "version": "1.0.0",
  "name": "Navigation Bar (Responsive) with Mobile Menu",
  "category": "components",
  "tags": ["navbar", "navigation", "header", "responsive", "mobile-menu", "sticky", "a11y"],
  "description": "A responsive navigation bar component with mobile hamburger menu, sticky scroll behavior, and transparent-to-solid transition. Supports marketing (logo + links + CTA) and app (user menu, notifications) variants.",
  "tokens": {
    "layout": {
      "navbarHeightDesktopPx": 72,
      "navbarHeightMobilePx": 60,
      "scrollThresholdPx": 20,
      "zIndex": {
        "navbar": 50,
        "mobileMenu": 50,
        "backdrop": 40,
        "dropdowns": 60,
        "tooltips": 70
      }
    },
    "motion": {
      "stickyTransitionMs": 300,
      "mobileMenuOpenMs": 300,
      "mobileMenuCloseMs": 250,
      "backdropFadeMs": 200,
      "easing": "cubic-bezier(0.4, 0, 0.2, 1)",
      "reducedMotionDurationMs": 100
    }
  },
  "aiAgentInstructions": {
    "summary": "Implement a responsive navigation bar with mobile hamburger menu, sticky positioning, and transparent-to-solid transition. Adapt to the user's framework and styling system. Ensure WCAG AA compliance, including focus trap, focus restoration, and ARIA attributes.",
    "keyFeatures": [
      "Responsive: Desktop shows horizontal nav links, mobile shows hamburger menu overlay",
      "Sticky positioning: Fixed at top when scrolling (if sticky=true)",
      "Transparent→Solid: Background transitions on scroll (if transparent=true)",
      "Mobile menu: Full-screen overlay with focus trap and body scroll lock",
      "Accessibility: ARIA attributes, keyboard navigation, focus management",
      "Active link: Highlights current page/route with aria-current=\"page\"",
      "Variants: Marketing (logo + links + CTA) and App (user menu, notifications)",
      "Animations: 300ms mobile menu, 200-300ms scroll transitions",
      "CRITICAL: Styling MUST match the project's existing conventions. Detect framework and styling system first, then use ONLY that system. Do NOT introduce new styling systems.",
      "CRITICAL: When detecting vanilla CSS, ALWAYS create CSS classes in a stylesheet. NEVER use inline style attributes on HTML elements. Define classes like .navbar, .navbar--sticky, .mobile-menu, etc. and apply them via className/class attributes."
    ],
    "implementationSteps": [
      "0. CRITICAL: Detect the project's framework and styling system BEFORE writing any code. Examine: (a) package.json for framework (React, Vue, Angular, Svelte) and styling dependencies (tailwindcss, styled-components, emotion, sass, etc.), (b) existing component files to see how they import styles (CSS Modules, Tailwind classes, styled-components, etc.), (c) config files (tailwind.config.js, vite.config.js, webpack.config.js, etc.), (d) existing style files and their structure. If the project uses Tailwind, use Tailwind. If SCSS/CSS, use SCSS/CSS. If styled-components, use styled-components. If nothing is configured, use the most suitable CSS approach (vanilla CSS or CSS Modules).",
      "0a. Detect framework patterns: Check how existing components are structured (hooks in React, composition API in Vue, etc.), how state is managed, and what patterns are used.",
      "0b. Detect styling conventions: Identify class naming (BEM, camelCase, kebab-case), how styles are imported, whether there's a design system or token system, and what utility functions exist (cn, clsx, classnames, etc.).",
      "0c. If detection is uncertain, ask the user about their styling approach and framework before proceeding.",
      "1. Build component anatomy: Logo, NavLinks (desktop), MobileToggle, Actions (CTA/User Menu), MobileMenu",
      "2. Implement mobile menu open/close state and controlled/uncontrolled usage",
      "3. Add scroll detection for sticky and transparent→solid behavior",
      "4. Add focus trap (manual or library) and focus restoration to toggle button",
      "5. Add Escape key handler for mobile menu close",
      "6. Add body scroll lock when mobile menu is open",
      "7. Apply ARIA: role=\"navigation\", aria-expanded, aria-controls, aria-current=\"page\"",
      "8. Add animations + prefers-reduced-motion behavior",
      "9. Implement active link detection and highlighting",
      "10. Use ONLY the detected styling system. Do NOT add <style> blocks, inline styles, or new CSS files unless that's the project's convention. Match existing component styling patterns exactly.",
      "11. Provide test checklist for keyboard + screen reader flows"
    ]
  },
  "componentSpec": {
    "goal": "Provide a responsive navigation bar that adapts to different screen sizes, supports sticky positioning, and includes accessible mobile menu functionality.",
    "anatomy": {
      "slots": [
        "logo",
        "navLinks",
        "mobileToggle",
        "actions",
        "mobileMenu"
      ],
      "hierarchy": "Navbar → Logo | NavLinks (desktop) | MobileToggle | Actions → MobileMenu (overlay) → NavLinks | Actions"
    },
    "stateModel": {
      "mobileMenuOpen": {
        "type": "boolean",
        "description": "Whether mobile menu is visible.",
        "default": false,
        "persistence": "component state only"
      },
      "scrolled": {
        "type": "boolean",
        "description": "Whether page has scrolled (computed from scroll position, used for transparent→solid transition).",
        "default": false,
        "persistence": "component state only",
        "determination": "Computed from window.scrollY > threshold (e.g., 20px)"
      },
      "activeLink": {
        "type": "string",
        "description": "Current active navigation link ID/route.",
        "default": "current route",
        "persistence": "sync with router/URL",
        "determination": "Compare current URL/route with navigation link hrefs"
      },
      "variant": {
        "type": "enum",
        "description": "Navbar style variant: marketing (logo + links + CTA) or app (user menu, notifications).",
        "default": "marketing",
        "allowedValues": ["marketing", "app"],
        "persistence": "props/config"
      },
      "sticky": {
        "type": "boolean",
        "description": "Whether navbar is sticky on scroll (fixed at top when scrolling).",
        "default": false,
        "persistence": "props/config"
      },
      "transparent": {
        "type": "boolean",
        "description": "Whether navbar starts transparent (becomes solid on scroll).",
        "default": false,
        "persistence": "props/config"
      }
    },
    "interactions": [
      {
        "event": "mobileToggleClick",
        "result": "toggleMobileMenu",
        "sideEffects": [
          "moveFocusToFirstMenuItem",
          "lockBodyScroll",
          "updateAriaExpanded"
        ]
      },
      {
        "event": "escapeKey",
        "when": "mobileMenuOpen",
        "result": "closeMobileMenu",
        "sideEffects": ["restoreFocusToToggle", "unlockBodyScroll", "updateAriaExpanded"],
        "preventDefault": true,
        "stopPropagation": true,
        "accessibilityNotes": "Escape should close mobile menu and return focus to the toggle button."
      },
      {
        "event": "backdropClick",
        "when": "mobileMenuOpen",
        "result": "closeMobileMenu",
        "sideEffects": ["restoreFocusToToggle", "unlockBodyScroll", "updateAriaExpanded"],
        "stopPropagation": true
      },
      {
        "event": "mobileLinkClick",
        "when": "mobileMenuOpen",
        "result": "closeMobileMenu",
        "sideEffects": ["restoreFocusToToggle", "unlockBodyScroll", "updateAriaExpanded", "navigateToRoute"]
      },
      {
        "event": "scroll",
        "when": "sticky || transparent",
        "result": "updateScrolledState",
        "sideEffects": ["updateBackground", "updateShadow"],
        "accessibilityNotes": "Throttle/debounce scroll events for performance (recommended: throttle with requestAnimationFrame or 100ms interval)"
      },
      {
        "event": "navLinkClick",
        "result": "navigateToRoute",
        "sideEffects": ["updateActiveLink", "updateAriaCurrent"]
      },
      {
        "event": "windowResize",
        "when": "mobileMenuOpen",
        "result": "closeMobileMenuIfDesktop",
        "sideEffects": ["restoreFocusToToggle", "unlockBodyScroll", "updateAriaExpanded"],
        "accessibilityNotes": "Close mobile menu when switching to desktop breakpoint (≥1024px)"
      }
    ],
    "responsiveBehavior": {
      "mobile": {
        "maxWidthPx": 767,
        "behavior": "Logo left, hamburger menu right. Navigation links hidden, accessible via mobile menu overlay. Actions hidden in navbar, shown in mobile menu.",
        "heightPx": 60,
        "mobileMenu": "Full-screen overlay or slide-in from side"
      },
      "tablet": {
        "minWidthPx": 768,
        "maxWidthPx": 1023,
        "behavior": "Logo left, hamburger menu right. Navigation links hidden, accessible via mobile menu overlay (same as mobile). Actions visible in navbar or mobile menu depending on space. Default: use mobile menu overlay pattern.",
        "heightPx": 72
      },
      "desktop": {
        "minWidthPx": 1024,
        "behavior": "Logo left, nav links center/left, actions right. Navigation links visible horizontally. Actions visible in navbar. Mobile menu hidden.",
        "heightPx": 72
      }
    },
    "variants": {
      "marketing": "Logo + horizontal nav links + primary CTA button. Transparent on hero section, solid on scroll. Sticky by default. Simple, clean design.",
      "app": "Logo + horizontal nav links + user menu + notifications. Solid background (no transparent variant). Sticky by default. More compact, functional design."
    }
  },
  "animations": {
    "stickyScroll": {
      "durationMs": 300,
      "easing": "cubic-bezier(0.4, 0, 0.2, 1)",
      "properties": ["background-color", "box-shadow", "backdrop-filter"],
      "trigger": "Scroll position > scrollThresholdPx (default: 20px)",
      "implementation": "Use requestAnimationFrame or throttle (100ms interval) for scroll detection"
    },
    "transparentToSolid": {
      "durationMs": 300,
      "easing": "cubic-bezier(0.4, 0, 0.2, 1)",
      "background": "rgba(255, 255, 255, 0.95) → #ffffff",
      "shadow": "none → 0 1px 3px rgba(0, 0, 0, 0.1)",
      "backdropFilter": "blur(8px) → none"
    },
    "mobileMenuOpen": {
      "durationMs": 300,
      "easing": "cubic-bezier(0.4, 0, 0.2, 1)",
      "menu": "translateX(-100%) → translateX(0) or translateY(-100%) → translateY(0)",
      "backdrop": "opacity: 0 → 1 (200ms)"
    },
    "mobileMenuClose": {
      "durationMs": 250,
      "easing": "cubic-bezier(0.4, 0, 0.2, 1)",
      "menu": "translateX(0) → translateX(-100%)",
      "backdrop": "opacity: 1 → 0 (150ms)"
    }
  },
  "accessibility": {
    "wcagCompliance": {
      "level": "AA",
      "requirements": {
        "2.1.1": "All navbar controls operable via keyboard; focus is trapped within mobile menu while open.",
        "2.1.2": "No keyboard trap beyond intended focus trap; Escape exits mobile menu.",
        "2.4.3": "Logical focus order; focus returns to toggle button when menu closes.",
        "2.4.7": "Visible focus indicators for all interactive elements.",
        "4.1.2": "Correct ARIA roles, names, and relationships."
      }
    },
    "keyboardNavigation": {
      "escapeKey": "Closes mobile menu when open; always restore focus to toggle button.",
      "tabKey": "Trapped within mobile menu when open. Tabbing cycles through focusable elements; Shift+Tab cycles backwards.",
      "initialFocus": "On mobile menu open, move focus to first focusable element in menu."
    },
    "ariaAttributes": {
      "required": {
        "navbar": {
          "role": "navigation",
          "aria-label": "Main navigation"
        },
        "mobileMenuToggle": {
          "aria-label": "Toggle menu",
          "aria-expanded": "true/false (dynamically updated)",
          "aria-controls": "mobile-menu (id of mobile menu element)"
        },
        "mobileMenu": {
          "role": "dialog",
          "aria-modal": "true",
          "aria-labelledby": "menu-toggle",
          "aria-hidden": "true/false (dynamically updated)",
          "note": "Mobile menu uses dialog semantics because it's a modal overlay with focus trap. Inside the dialog, use <nav aria-label=\"Main navigation\"> for the navigation links."
        },
        "activeNavLink": {
          "aria-current": "page (on current page link only)"
        },
        "userMenuButton": {
          "aria-label": "User menu",
          "aria-haspopup": "true",
          "aria-expanded": "true/false (dynamically updated)",
          "aria-controls": "user-dropdown"
        },
        "notificationsButton": {
          "aria-label": "Notifications: {count} unread (include count in label)",
          "aria-haspopup": "true",
          "aria-expanded": "true/false (dynamically updated)"
        }
      },
      "optional": {
        "logo": {
          "alt": "Descriptive alt text for logo image"
        }
      }
    },
    "modalBehavior": {
      "mobileMenu": {
        "description": "Mobile menu behaves as a modal dialog when open",
        "requirements": [
          "role=\"dialog\" with aria-modal=\"true\" on mobile menu container",
          "Focus trap: All keyboard focus trapped within mobile menu",
          "Background content: Should be made inert/aria-hidden while menu is open (implementation-dependent, e.g., use inert attribute or aria-hidden on main content)",
          "Focus restoration: Return focus to toggle button when menu closes",
          "Escape key: Closes menu and restores focus",
          "Backdrop click: Closes menu (optional, but recommended)"
        ]
      }
    },
    "bodyScrollLock": {
      "description": "Prevent body scrolling when mobile menu is open",
      "approach": "Set document.body.style.overflow = 'hidden'",
      "preserveScrollPosition": "Optional: Use position: fixed with top: -${window.scrollY}px to preserve scroll position",
      "iosHandling": "On iOS, may need additional handling for overscroll behavior (e.g., prevent touchmove on body)",
      "cleanup": "Restore previous overflow/position styles on menu close"
    },
    "prefersReducedMotion": {
      "behavior": "When prefers-reduced-motion is enabled:",
      "rules": [
        "Disable transform animations (translateX/translateY)",
        "Reduce animation durations to ≤100ms (use tokens.motion.reducedMotionDurationMs)",
        "Remove or reduce backdrop-filter blur transitions",
        "Keep opacity transitions for essential state changes (≤100ms)"
      ]
    },
    "implementationChecklist": [
      "All buttons have aria-label or visible text",
      "Mobile menu toggle has aria-expanded and aria-controls",
      "Mobile menu uses role=\"dialog\" with aria-modal=\"true\" (not role=\"menu\")",
      "Mobile menu contains <nav aria-label=\"Main navigation\"> for navigation links",
      "Background content is made inert/aria-hidden while mobile menu is open",
      "Mobile menu has aria-hidden that updates dynamically",
      "Active navigation link has aria-current=\"page\"",
      "Focus trap implemented for mobile menu",
      "Focus restored to toggle button when menu closes",
      "Escape key closes mobile menu",
      "Body scroll lock applied when mobile menu is open (with iOS handling if needed)",
      "All interactive elements have visible focus indicators",
      "Logo image has descriptive alt text",
      "Screen reader tested with NVDA, VoiceOver, or JAWS",
      "Prefers-reduced-motion disables transforms and reduces durations"
    ]
  },
  "frameworkPatterns": {
    "react": {
      "stateManagement": "useState for component state, custom hooks for scroll detection and mobile menu state",
      "customHooks": "Extract logic into separate hooks that do ONE thing each: useScrollPosition(threshold), useMobileMenu(), useFocusTrap(containerRef, isActive), useBodyScrollLock(isLocked). NEVER put multiple concerns in a single useEffect.",
      "example": "const [mobileMenuOpen, setMobileMenuOpen] = useState(false); const scrolled = useScrollPosition(20); const { trapFocus, releaseFocus } = useFocusTrap(mobileMenuRef, mobileMenuOpen);",
      "componentStructure": "<Navbar variant={variant} sticky={sticky} transparent={transparent}><NavbarLogo /><NavbarLinks /><MobileMenuToggle /><NavbarActions /><MobileMenu /></Navbar>"
    },
    "vue": {
      "stateManagement": "ref() or reactive() for state, watch() for scroll detection",
      "example": "const mobileMenuOpen = ref(false); const scrolled = ref(false); onMounted(() => { window.addEventListener('scroll', throttle(() => { scrolled.value = window.scrollY > 20; }, 100)); });",
      "componentStructure": "<Navbar :variant='variant' :sticky='sticky' :transparent='transparent'><NavbarLogo /><NavbarLinks /><MobileMenuToggle /><NavbarActions /><MobileMenu /></Navbar>"
    },
    "angular": {
      "stateManagement": "Component properties, RxJS BehaviorSubject for shared state",
      "example": "mobileMenuOpen$ = new BehaviorSubject<boolean>(false); scrolled$ = new BehaviorSubject<boolean>(false);",
      "componentStructure": "<app-navbar [variant]='variant' [sticky]='sticky' [transparent]='transparent'><app-navbar-logo /><app-navbar-links /><app-mobile-menu-toggle /><app-navbar-actions /><app-mobile-menu /></app-navbar>"
    },
    "svelte": {
      "stateManagement": "writable stores for state, onMount for scroll detection",
      "example": "import { writable } from 'svelte/store'; export const mobileMenuOpen = writable(false);",
      "componentStructure": "<Navbar {variant} {sticky} {transparent}><NavbarLogo /><NavbarLinks /><MobileMenuToggle /><NavbarActions /><MobileMenu /></Navbar>"
    }
  },
  "testingChecklist": [
    "Navbar renders correctly on all breakpoints",
    "Mobile menu opens and closes smoothly",
    "Mobile menu closes on backdrop click, Escape key, and link click",
    "Focus is trapped within mobile menu when open",
    "Focus is restored to toggle button when menu closes",
    "Body scroll is locked when mobile menu is open and restored on close",
    "Sticky positioning works correctly (if enabled)",
    "Transparent→Solid transition works on scroll (if enabled)",
    "Active link is highlighted correctly",
    "All interactive elements have visible focus indicators",
    "Keyboard navigation works throughout",
    "Screen reader announces state changes",
    "aria-expanded, aria-hidden, aria-current are correctly managed",
    "Logo is clickable and links to home",
    "CTA button works correctly (marketing variant)",
    "User menu dropdown works correctly (app variant)",
    "Notifications badge displays correctly (app variant)",
    "Window resize handling works correctly (closes mobile menu on desktop switch)",
    "Animations are smooth (60fps)",
    "No layout shift or flicker on load",
    "SSR/hydration safe (no DOM access before mount)",
    "prefers-reduced-motion reduces or removes animations",
    "All styling matches project conventions"
  ],
  "aiImplementationPrompt": "Implement a responsive Navigation Bar component with mobile hamburger menu, sticky scroll behavior, and transparent-to-solid transition. Support marketing (logo + links + CTA) and app (user menu, notifications) variants. Mobile menu must use role=\"dialog\" with aria-modal=\"true\" (not role=\"menu\") and contain <nav aria-label=\"Main navigation\"> for links. Include focus trap, focus restoration, body scroll lock, and keyboard accessibility. Add smooth animations with prefers-reduced-motion support (disable transforms, reduce durations to ≤100ms). Adapt to {{USER_FRAMEWORK}} and {{USER_STYLING_LIBRARY}}. CRITICAL: If vanilla CSS is detected, create CSS classes in a stylesheet, never use inline styles. If React is detected, extract useEffect logic into separate custom hooks (one concern per hook).",
  "meta": {
    "created": "2026-01-12",
    "updated": "2026-01-12",
    "complexity": "intermediate",
    "estimatedImplementationTime": "2-3 hours",
    "webUrl": "https://uipotion.com/potions/components/navbar.html"
  }
}
